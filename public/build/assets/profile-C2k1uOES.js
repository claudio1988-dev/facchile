import{c as ft,e as ut,u as gt,a as lt,j as t,L as _t}from"./app-kLTWDAhF.js";import{H as pt,S as ht}from"./layout-BhjWo0zY.js";import{I as o}from"./input-error-9E7HsKzt.js";import{B as xt}from"./button-BrAg7e5g.js";import{I as f}from"./input-c1ehzcam.js";import{L as d}from"./label-B8jNiJdt.js";import{S as at,a as rt,c as it,d as nt,b as ot}from"./select-Dql27kpO.js";import{s as bt}from"./index-DcmOMlk_.js";import{p as jt}from"./index-BBTFKsCf.js";import{K as vt}from"./transition-CQAvJ1wP.js";/* empty css            */import"./index-CSEUMRIG.js";import"./WhatsAppFloating-Xw71eTMF.js";import"./dropdown-menu-BwQ6lBD5.js";import"./truck-Bnywy6Zj.js";import"./user-BCrfBWqD.js";import"./shield-check-BDgbu9QS.js";import"./phone-C-YrCXal.js";import"./chevron-down-BT7dPZjd.js";import"./search-COCbplcl.js";import"./index-CXvVUomq.js";import"./index-X1yLg1Ew.js";import"./index-BaLexKSW.js";import"./check-D1fbw-1A.js";function Wt(n){const e=ft.c(190),{mustVerifyEmail:He,status:Be,customer:_e,address:i,regions:pe,communes:tt}=n;let he;e[0]!==pe?(he=pe===void 0?[]:pe,e[0]=pe,e[1]=he):he=e[1];const Ge=he,c=tt===void 0?[]:tt,{auth:m}=ut().props;let xe;e:{if(i?.commune?.region_id){let l;e[2]!==i.commune.region_id?(l=i.commune.region_id.toString(),e[2]=i.commune.region_id,e[3]=l):l=e[3],xe=l;break e}if(i?.commune_id){let l;e[4]!==i?(l=ct=>ct.id===i.commune_id,e[4]=i,e[5]=l):l=e[5],xe=c.find(l)?.region_id?.toString()||"";break e}xe=""}const u=xe,Ke=_e?.rut||"",Oe=_e?.phone||"",Ue=_e?.first_name||"",Je=_e?.last_name||"",$e=i?.address_line1||"",Me=i?.address_line2||"";let g;e[6]!==i?.commune_id?(g=i?.commune_id?.toString()||"",e[6]=i?.commune_id,e[7]=g):g=e[7];let be;e[8]!==m.user.email||e[9]!==m.user.name||e[10]!==u||e[11]!==Me||e[12]!==g||e[13]!==Ke||e[14]!==Oe||e[15]!==Ue||e[16]!==Je||e[17]!==$e?(be={name:m.user.name,email:m.user.email,rut:Ke,phone:Oe,first_name:Ue,last_name:Je,address_line1:$e,address_line2:Me,region_id:u,commune_id:g},e[8]=m.user.email,e[9]=m.user.name,e[10]=u,e[11]=Me,e[12]=g,e[13]=Ke,e[14]=Oe,e[15]=Ue,e[16]=Je,e[17]=$e,e[18]=be):be=e[18];const{data:s,setData:a,patch:Qe,errors:r,processing:We,recentlySuccessful:Xe}=gt(be);let je;e[19]!==c||e[20]!==u?(je=()=>{if(u){const l=parseInt(u);return c.filter(ge=>ge.region_id===l)}return[]},e[19]=c,e[20]=u,e[21]=je):je=e[21];const[Ye,st]=lt.useState(je);let ve,Ne;e[22]!==c||e[23]!==s.region_id?(ve=()=>{if(s.region_id){const l=parseInt(s.region_id);st(c.filter(ge=>ge.region_id===l))}else st([])},Ne=[s.region_id,c],e[22]=c,e[23]=s.region_id,e[24]=ve,e[25]=Ne):(ve=e[24],Ne=e[25]),lt.useEffect(ve,Ne);let Se;e[26]!==s||e[27]!==Qe?(Se=l=>{l.preventDefault(),console.log("Submitting profile form...",s),Qe(jt.update.url(),{preserveScroll:!0,onSuccess:kt,onError:yt})},e[26]=s,e[27]=Qe,e[28]=Se):Se=e[28];const Ze=Se;let ye;e[29]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(pt,{variant:"small",title:"Información del perfil",description:"Actualiza tu información personal y de envío para agilizar tus compras."}),e[29]=ye):ye=e[29];let ke;e[30]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(d,{htmlFor:"name",children:"Nombre de Usuario"}),e[30]=ke):ke=e[30];let _;e[31]!==a?(_=l=>a("name",l.target.value),e[31]=a,e[32]=_):_=e[32];let p;e[33]!==s.name||e[34]!==_?(p=t.jsx(f,{id:"name",className:"mt-1 block w-full bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800",value:s.name,onChange:_,required:!0,autoComplete:"name"}),e[33]=s.name,e[34]=_,e[35]=p):p=e[35];let h;e[36]!==r.name?(h=t.jsx(o,{message:r.name}),e[36]=r.name,e[37]=h):h=e[37];let x;e[38]!==p||e[39]!==h?(x=t.jsxs("div",{className:"grid gap-2",children:[ke,p,h]}),e[38]=p,e[39]=h,e[40]=x):x=e[40];let Ce;e[41]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(d,{htmlFor:"email",children:"Correo electrónico"}),e[41]=Ce):Ce=e[41];let b;e[42]!==a?(b=l=>a("email",l.target.value),e[42]=a,e[43]=b):b=e[43];let j;e[44]!==s.email||e[45]!==b?(j=t.jsx(f,{id:"email",type:"email",className:"mt-1 block w-full bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800",value:s.email,onChange:b,required:!0,autoComplete:"username"}),e[44]=s.email,e[45]=b,e[46]=j):j=e[46];let v;e[47]!==r.email?(v=t.jsx(o,{message:r.email}),e[47]=r.email,e[48]=v):v=e[48];let N;e[49]!==j||e[50]!==v?(N=t.jsxs("div",{className:"grid gap-2",children:[Ce,j,v]}),e[49]=j,e[50]=v,e[51]=N):N=e[51];let S;e[52]!==x||e[53]!==N?(S=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x,N]}),e[52]=x,e[53]=N,e[54]=S):S=e[54];let Fe;e[55]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(d,{htmlFor:"first_name",children:"Nombre"}),e[55]=Fe):Fe=e[55];let y;e[56]!==a?(y=l=>a("first_name",l.target.value),e[56]=a,e[57]=y):y=e[57];let k;e[58]!==s.first_name||e[59]!==y?(k=t.jsx(f,{id:"first_name",value:s.first_name,onChange:y,placeholder:"Ej: Juan",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[58]=s.first_name,e[59]=y,e[60]=k):k=e[60];let C;e[61]!==r.first_name?(C=t.jsx(o,{message:r.first_name}),e[61]=r.first_name,e[62]=C):C=e[62];let F;e[63]!==k||e[64]!==C?(F=t.jsxs("div",{className:"grid gap-2",children:[Fe,k,C]}),e[63]=k,e[64]=C,e[65]=F):F=e[65];let Ee;e[66]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(d,{htmlFor:"last_name",children:"Apellido"}),e[66]=Ee):Ee=e[66];let E;e[67]!==a?(E=l=>a("last_name",l.target.value),e[67]=a,e[68]=E):E=e[68];let I;e[69]!==s.last_name||e[70]!==E?(I=t.jsx(f,{id:"last_name",value:s.last_name,onChange:E,placeholder:"Ej: Pérez",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[69]=s.last_name,e[70]=E,e[71]=I):I=e[71];let P;e[72]!==r.last_name?(P=t.jsx(o,{message:r.last_name}),e[72]=r.last_name,e[73]=P):P=e[73];let D;e[74]!==I||e[75]!==P?(D=t.jsxs("div",{className:"grid gap-2",children:[Ee,I,P]}),e[74]=I,e[75]=P,e[76]=D):D=e[76];let L;e[77]!==F||e[78]!==D?(L=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[F,D]}),e[77]=F,e[78]=D,e[79]=L):L=e[79];let Ie;e[80]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx(d,{htmlFor:"rut",children:"RUT"}),e[80]=Ie):Ie=e[80];let R;e[81]!==a?(R=l=>a("rut",l.target.value),e[81]=a,e[82]=R):R=e[82];let T;e[83]!==s.rut||e[84]!==R?(T=t.jsx(f,{id:"rut",value:s.rut,onChange:R,placeholder:"12.345.678-9",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[83]=s.rut,e[84]=R,e[85]=T):T=e[85];let w;e[86]!==r.rut?(w=t.jsx(o,{message:r.rut}),e[86]=r.rut,e[87]=w):w=e[87];let z;e[88]!==T||e[89]!==w?(z=t.jsxs("div",{className:"grid gap-2",children:[Ie,T,w]}),e[88]=T,e[89]=w,e[90]=z):z=e[90];let Pe;e[91]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(d,{htmlFor:"phone",children:"Teléfono"}),e[91]=Pe):Pe=e[91];let V;e[92]!==a?(V=l=>a("phone",l.target.value),e[92]=a,e[93]=V):V=e[93];let q;e[94]!==s.phone||e[95]!==V?(q=t.jsx(f,{id:"phone",value:s.phone,onChange:V,placeholder:"+56 9 1234 5678",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[94]=s.phone,e[95]=V,e[96]=q):q=e[96];let A;e[97]!==r.phone?(A=t.jsx(o,{message:r.phone}),e[97]=r.phone,e[98]=A):A=e[98];let H;e[99]!==q||e[100]!==A?(H=t.jsxs("div",{className:"grid gap-2",children:[Pe,q,A]}),e[99]=q,e[100]=A,e[101]=H):H=e[101];let B;e[102]!==z||e[103]!==H?(B=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[z,H]}),e[102]=z,e[103]=H,e[104]=B):B=e[104];let De;e[105]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx("h3",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Dirección de Envío Principal"}),e[105]=De):De=e[105];let Le;e[106]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx(d,{htmlFor:"region",children:"Región"}),e[106]=Le):Le=e[106];const dt=s.region_id;let G;e[107]!==a?(G=l=>{a(ge=>({...ge,region_id:l,commune_id:""}))},e[107]=a,e[108]=G):G=e[108];let Re;e[109]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(at,{className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800",children:t.jsx(rt,{placeholder:"Selecciona una región"})}),e[109]=Re):Re=e[109];let K;e[110]!==Ge?(K=Ge.map(St),e[110]=Ge,e[111]=K):K=e[111];let O;e[112]!==K?(O=t.jsx(it,{children:K}),e[112]=K,e[113]=O):O=e[113];let U;e[114]!==s.region_id||e[115]!==G||e[116]!==O?(U=t.jsxs(nt,{value:dt,onValueChange:G,children:[Re,O]}),e[114]=s.region_id,e[115]=G,e[116]=O,e[117]=U):U=e[117];let J;e[118]!==r.region_id?(J=t.jsx(o,{message:r.region_id}),e[118]=r.region_id,e[119]=J):J=e[119];let $;e[120]!==U||e[121]!==J?($=t.jsxs("div",{className:"grid gap-2",children:[Le,U,J]}),e[120]=U,e[121]=J,e[122]=$):$=e[122];let Te;e[123]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(d,{htmlFor:"commune",children:"Comuna"}),e[123]=Te):Te=e[123];const mt=s.commune_id;let M;e[124]!==a?(M=l=>a("commune_id",l),e[124]=a,e[125]=M):M=e[125];const et=!s.region_id;let we;e[126]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(at,{className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800",children:t.jsx(rt,{placeholder:"Selecciona una comuna"})}),e[126]=we):we=e[126];let Q;e[127]!==Ye?(Q=Ye.map(Nt),e[127]=Ye,e[128]=Q):Q=e[128];let W;e[129]!==Q?(W=t.jsx(it,{children:Q}),e[129]=Q,e[130]=W):W=e[130];let X;e[131]!==s.commune_id||e[132]!==M||e[133]!==et||e[134]!==W?(X=t.jsxs(nt,{value:mt,onValueChange:M,disabled:et,children:[we,W]}),e[131]=s.commune_id,e[132]=M,e[133]=et,e[134]=W,e[135]=X):X=e[135];let Y;e[136]!==r.commune_id?(Y=t.jsx(o,{message:r.commune_id}),e[136]=r.commune_id,e[137]=Y):Y=e[137];let Z;e[138]!==X||e[139]!==Y?(Z=t.jsxs("div",{className:"grid gap-2",children:[Te,X,Y]}),e[138]=X,e[139]=Y,e[140]=Z):Z=e[140];let ee;e[141]!==$||e[142]!==Z?(ee=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[$,Z]}),e[141]=$,e[142]=Z,e[143]=ee):ee=e[143];let ze;e[144]===Symbol.for("react.memo_cache_sentinel")?(ze=t.jsx(d,{htmlFor:"address_line1",children:"Calle y Número"}),e[144]=ze):ze=e[144];let te;e[145]!==a?(te=l=>a("address_line1",l.target.value),e[145]=a,e[146]=te):te=e[146];let se;e[147]!==s.address_line1||e[148]!==te?(se=t.jsx(f,{id:"address_line1",value:s.address_line1,onChange:te,placeholder:"Av. Providencia 1234",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[147]=s.address_line1,e[148]=te,e[149]=se):se=e[149];let le;e[150]!==r.address_line1?(le=t.jsx(o,{message:r.address_line1}),e[150]=r.address_line1,e[151]=le):le=e[151];let ae;e[152]!==se||e[153]!==le?(ae=t.jsxs("div",{className:"grid gap-2",children:[ze,se,le]}),e[152]=se,e[153]=le,e[154]=ae):ae=e[154];let Ve;e[155]===Symbol.for("react.memo_cache_sentinel")?(Ve=t.jsx(d,{htmlFor:"address_line2",children:"Depto / Casa / Oficina (Opcional)"}),e[155]=Ve):Ve=e[155];let re;e[156]!==a?(re=l=>a("address_line2",l.target.value),e[156]=a,e[157]=re):re=e[157];let ie;e[158]!==s.address_line2||e[159]!==re?(ie=t.jsx(f,{id:"address_line2",value:s.address_line2,onChange:re,placeholder:"Depto 402",className:"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-800"}),e[158]=s.address_line2,e[159]=re,e[160]=ie):ie=e[160];let ne;e[161]!==r.address_line2?(ne=t.jsx(o,{message:r.address_line2}),e[161]=r.address_line2,e[162]=ne):ne=e[162];let oe;e[163]!==ie||e[164]!==ne?(oe=t.jsxs("div",{className:"grid gap-2",children:[Ve,ie,ne]}),e[163]=ie,e[164]=ne,e[165]=oe):oe=e[165];let de;e[166]!==ee||e[167]!==ae||e[168]!==oe?(de=t.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:[De,ee,ae,oe]}),e[166]=ee,e[167]=ae,e[168]=oe,e[169]=de):de=e[169];let me;e[170]!==m.user.email_verified_at||e[171]!==He||e[172]!==Be?(me=He&&m.user.email_verified_at===null&&t.jsxs("div",{children:[t.jsxs("p",{className:"-mt-4 text-sm text-muted-foreground",children:["Tu dirección de correo no está verificada."," ",t.jsx(_t,{href:bt(),as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Haz clic aquí para reenviar el correo de verificación."})]}),Be==="verification-link-sent"&&t.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"Se ha enviado un nuevo enlace de verificación a tu correo electrónico."})]}),e[170]=m.user.email_verified_at,e[171]=He,e[172]=Be,e[173]=me):me=e[173];let ce;e[174]!==We?(ce=t.jsx(xt,{type:"submit",disabled:We,className:"bg-brand-primary hover:bg-brand-secondary text-white",children:"Guardar Cambios"}),e[174]=We,e[175]=ce):ce=e[175];let qe;e[176]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsx("p",{className:"text-sm text-neutral-600",children:"Guardado correctamente."}),e[176]=qe):qe=e[176];let fe;e[177]!==Xe?(fe=t.jsx(vt,{show:Xe,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:qe}),e[177]=Xe,e[178]=fe):fe=e[178];let ue;e[179]!==ce||e[180]!==fe?(ue=t.jsxs("div",{className:"flex items-center gap-4",children:[ce,fe]}),e[179]=ce,e[180]=fe,e[181]=ue):ue=e[181];let Ae;return e[182]!==Ze||e[183]!==S||e[184]!==L||e[185]!==B||e[186]!==de||e[187]!==me||e[188]!==ue?(Ae=t.jsx(ht,{children:t.jsxs("div",{className:"space-y-6",children:[ye,t.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[S,L,B,de,me,ue]})]})}),e[182]=Ze,e[183]=S,e[184]=L,e[185]=B,e[186]=de,e[187]=me,e[188]=ue,e[189]=Ae):Ae=e[189],Ae}function Nt(n){return t.jsx(ot,{value:n.id.toString(),children:n.name},n.id)}function St(n){return t.jsx(ot,{value:n.id.toString(),children:n.name},n.id)}function yt(n){return console.error("Profile update failed:",n)}function kt(){return console.log("Profile updated successfully")}export{Wt as default};
