import{c as Je,j as s,r as Qe,H as Xe,L as Ke}from"./app-DxsfQUJi.js";import{A as Ye}from"./app-layout-e9kzE5wy.js";import{C as R,a as q,b as U,c as V}from"./card-t-JZ25Uq.js";import{c as Ze,B as Ce}from"./button-PchWSbes.js";import{B as Ve}from"./badge-C493SvYW.js";import{d as es,S as ss,a as ts,c as ls,b as O}from"./select-DpW0WDHc.js";import{T as as,a as Ge,b as we,d as rs,e as is,c as Pe}from"./table-DMsPuU9K.js";import{D as ns,a as cs,b as os,c as ds,d as ms,e as xs,f as hs}from"./dialog-B-Xi7BHL.js";import{A as fs}from"./arrow-left-rZZ7HcbG.js";import{S as ps}from"./square-pen-Bn8BzX94.js";import{P as js}from"./package-C1mDBw64.js";import{U as gs,M as us}from"./user-3v9Wh1Ix.js";import{T as bs}from"./truck-DsWEenBM.js";import{C as _s}from"./credit-card-B6LXPiqX.js";/* empty css            */import"./app-sidebar-layout-CWp90ihB.js";import"./breadcrumb-DQh3Drij.js";import"./index-DezMigX2.js";import"./dropdown-menu-BhlSbKAy.js";import"./index-CwI4k_fG.js";import"./index-CgxY_J7U.js";import"./index-CSEUMRIG.js";import"./index-CHmcnihG.js";import"./index-BI44xg6_.js";import"./log-out-CK-E1Ehb.js";import"./layout-grid-BgmpgEtx.js";import"./index-CnkcuHUr.js";import"./chevron-down-JuN8FzWa.js";import"./check-BIGgmKJA.js";const Ns=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ys=Ze("Download",Ns);const vs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ss=Ze("FileText",vs),Cs={pending:{label:"Pendiente",color:"bg-yellow-500"},processing:{label:"Procesando",color:"bg-blue-500"},shipped:{label:"Enviado",color:"bg-indigo-500"},delivered:{label:"Entregado",color:"bg-green-500"},cancelled:{label:"Cancelado",color:"bg-red-500"}},ws={webpay:{label:"WebPay Plus",color:"bg-purple-500"},transfer:{label:"Transferencia Bancaria",color:"bg-blue-500"},transferencia:{label:"Transferencia Bancaria",color:"bg-blue-500"},"N/A":{label:"No especificado",color:"bg-gray-400"}},We={pending:{label:"Pendiente",color:"bg-yellow-500"},paid:{label:"Pagado",color:"bg-green-500"},failed:{label:"Fallido",color:"bg-red-500"},refunded:{label:"Reembolsado",color:"bg-gray-500"}};function lt(l){const e=Je.c(139),{order:t}=l;let K;e[0]!==t.id?(K=Oe=>{confirm(`¿Cambiar estado del pedido a ${Cs[Oe].label}?`)&&Qe.put(`/adminfacchile/orders/${t.id}`,{status:Oe})},e[0]=t.id,e[1]=K):K=e[1];const Te=K;let W,Z;e[2]===Symbol.for("react.memo_cache_sentinel")?(W={title:"Panel Administrativo",href:"/adminfacchile"},Z={title:"Pedidos",href:"/adminfacchile/orders"},e[2]=W,e[3]=Z):(W=e[2],Z=e[3]);const ke=`Orden #${t.order_number}`;let G;e[4]!==ke?(G=[W,Z,{title:ke,href:"#"}],e[4]=ke,e[5]=G):G=e[5];const Le=G,De=`Orden #${t.order_number} - Panel Administrativo`;let a;e[6]!==De?(a=s.jsx(Xe,{title:De}),e[6]=De,e[7]=a):a=e[7];let J;e[8]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(Ke,{href:"/adminfacchile/orders",children:s.jsx(Ce,{variant:"outline",size:"icon",children:s.jsx(fs,{className:"size-4"})})}),e[8]=J):J=e[8];let r;e[9]!==t.order_number?(r=s.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Orden #",t.order_number]}),e[9]=t.order_number,e[10]=r):r=e[10];let i;e[11]!==t.created_at?(i=s.jsx("p",{className:"text-muted-foreground",children:t.created_at}),e[11]=t.created_at,e[12]=i):i=e[12];let n;e[13]!==i||e[14]!==r?(n=s.jsxs("div",{className:"flex items-center gap-4",children:[J,s.jsxs("div",{children:[r,i]})]}),e[13]=i,e[14]=r,e[15]=n):n=e[15];let Q;e[16]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(ss,{className:"w-[180px]",children:s.jsx(ts,{placeholder:"Estado"})}),e[16]=Q):Q=e[16];let X;e[17]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(ls,{children:[s.jsx(O,{value:"pending",children:"Pendiente"}),s.jsx(O,{value:"processing",children:"Procesando"}),s.jsx(O,{value:"shipped",children:"Enviado"}),s.jsx(O,{value:"delivered",children:"Entregado"}),s.jsx(O,{value:"cancelled",children:"Cancelado"})]}),e[17]=X):X=e[17];let c;e[18]!==Te||e[19]!==t.status?(c=s.jsxs(es,{value:t.status,onValueChange:Te,children:[Q,X]}),e[18]=Te,e[19]=t.status,e[20]=c):c=e[20];const Fe=`/adminfacchile/orders/${t.id}/edit`;let Y;e[21]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsxs(Ce,{variant:"outline",children:[s.jsx(ps,{className:"mr-2 h-4 w-4"}),"Editar"]}),e[21]=Y):Y=e[21];let o;e[22]!==Fe?(o=s.jsx(Ke,{href:Fe,children:Y}),e[22]=Fe,e[23]=o):o=e[23];let ee;e[24]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(os,{asChild:!0,children:s.jsxs(Ce,{variant:"outline",children:[s.jsx(Ss,{className:"mr-2 h-4 w-4"}),"Comprobante"]})}),e[24]=ee):ee=e[24];let se;e[25]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(ds,{children:"Comprobante de Venta"}),e[25]=se):se=e[25];let d;e[26]!==t.order_number?(d=s.jsxs(ns,{children:[se,s.jsxs(cs,{children:["Descarga el comprobante de la orden #",t.order_number," en formato PDF."]})]}),e[26]=t.order_number,e[27]=d):d=e[27];let te;e[28]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("p",{className:"text-sm font-medium",children:"Resumen del pedido"}),e[28]=te):te=e[28];let le;e[29]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx("span",{children:"Cliente:"}),e[29]=le):le=e[29];const $e=t.customer?.first_name,Me=t.customer?.last_name;let m;e[30]!==$e||e[31]!==Me?(m=s.jsxs("div",{className:"flex justify-between text-xs",children:[le,s.jsxs("span",{className:"font-semibold",children:[$e," ",Me]})]}),e[30]=$e,e[31]=Me,e[32]=m):m=e[32];let ae;e[33]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx("span",{children:"Items:"}),e[33]=ae):ae=e[33];let x;e[34]!==t.items.length?(x=s.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[ae,s.jsx("span",{children:t.items.length})]}),e[34]=t.items.length,e[35]=x):x=e[35];let re;e[36]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx("span",{children:"Total:"}),e[36]=re):re=e[36];let ie;e[37]!==t.total?(ie=t.total.toString(),e[37]=t.total,e[38]=ie):ie=e[38];const Ee=parseFloat(ie);let h;e[39]!==Ee?(h=Ee.toLocaleString("es-CL"),e[39]=Ee,e[40]=h):h=e[40];let f;e[41]!==h?(f=s.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[re,s.jsxs("span",{className:"font-semibold",children:["$",h]})]}),e[41]=h,e[42]=f):f=e[42];let p;e[43]!==m||e[44]!==x||e[45]!==f?(p=s.jsx("div",{className:"flex items-center space-x-2 py-4",children:s.jsxs("div",{className:"grid flex-1 gap-2",children:[te,s.jsxs("div",{className:"rounded-md border p-3 bg-muted/50",children:[m,x,f]})]})}),e[43]=m,e[44]=x,e[45]=f,e[46]=p):p=e[46];const He=`/adminfacchile/orders/${t.id}/receipt`;let ne;e[47]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsxs(Ce,{className:"w-full",children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),"Descargar PDF"]}),e[47]=ne):ne=e[47];let j;e[48]!==He?(j=s.jsx(ms,{className:"sm:justify-start",children:s.jsx("a",{href:He,target:"_blank",rel:"noreferrer",className:"w-full",children:ne})}),e[48]=He,e[49]=j):j=e[49];let g;e[50]!==d||e[51]!==p||e[52]!==j?(g=s.jsxs(xs,{children:[ee,s.jsxs(hs,{className:"sm:max-w-md",children:[d,p,j]})]}),e[50]=d,e[51]=p,e[52]=j,e[53]=g):g=e[53];let u;e[54]!==c||e[55]!==o||e[56]!==g?(u=s.jsxs("div",{className:"flex items-center gap-4",children:[c,o,g]}),e[54]=c,e[55]=o,e[56]=g,e[57]=u):u=e[57];let b;e[58]!==n||e[59]!==u?(b=s.jsxs("div",{className:"flex items-center justify-between",children:[n,u]}),e[58]=n,e[59]=u,e[60]=b):b=e[60];let ce;e[61]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(U,{children:s.jsxs(V,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"size-5"}),"Items del Pedido"]})}),e[61]=ce):ce=e[61];let oe;e[62]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(as,{children:s.jsxs(Ge,{children:[s.jsx(we,{children:"Producto"}),s.jsx(we,{className:"text-right",children:"Precio"}),s.jsx(we,{className:"text-center",children:"Cant."}),s.jsx(we,{className:"text-right",children:"Total"})]})}),e[62]=oe):oe=e[62];let _;e[63]!==t.items?(_=t.items.map(Ps),e[63]=t.items,e[64]=_):_=e[64];let N;e[65]!==_?(N=s.jsxs(rs,{children:[oe,s.jsx(is,{children:_})]}),e[65]=_,e[66]=N):N=e[66];let de;e[67]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("span",{children:"Subtotal"}),e[67]=de):de=e[67];let me;e[68]!==t.subtotal?(me=t.subtotal.toString(),e[68]=t.subtotal,e[69]=me):me=e[69];const ze=parseFloat(me);let y;e[70]!==ze?(y=ze.toLocaleString("es-CL"),e[70]=ze,e[71]=y):y=e[71];let v;e[72]!==y?(v=s.jsxs("div",{className:"flex justify-between text-sm",children:[de,s.jsxs("span",{children:["$",y]})]}),e[72]=y,e[73]=v):v=e[73];let xe;e[74]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx("span",{children:"Envío"}),e[74]=xe):xe=e[74];let he;e[75]!==t.shipping_cost?(he=t.shipping_cost.toString(),e[75]=t.shipping_cost,e[76]=he):he=e[76];const Ae=parseFloat(he);let S;e[77]!==Ae?(S=Ae.toLocaleString("es-CL"),e[77]=Ae,e[78]=S):S=e[78];let C;e[79]!==S?(C=s.jsxs("div",{className:"flex justify-between text-sm",children:[xe,s.jsxs("span",{children:["$",S]})]}),e[79]=S,e[80]=C):C=e[80];let fe;e[81]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("span",{children:"Impuesto (19%)"}),e[81]=fe):fe=e[81];let pe;e[82]!==t.tax?(pe=t.tax.toString(),e[82]=t.tax,e[83]=pe):pe=e[83];const Be=parseFloat(pe);let w;e[84]!==Be?(w=Be.toLocaleString("es-CL"),e[84]=Be,e[85]=w):w=e[85];let P;e[86]!==w?(P=s.jsxs("div",{className:"flex justify-between text-sm",children:[fe,s.jsxs("span",{children:["$",w]})]}),e[86]=w,e[87]=P):P=e[87];let je;e[88]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx("span",{children:"Total"}),e[88]=je):je=e[88];let ge;e[89]!==t.total?(ge=t.total.toString(),e[89]=t.total,e[90]=ge):ge=e[90];const Ie=parseFloat(ge);let T;e[91]!==Ie?(T=Ie.toLocaleString("es-CL"),e[91]=Ie,e[92]=T):T=e[92];let k;e[93]!==T?(k=s.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t border-dashed",children:[je,s.jsxs("span",{children:["$",T]})]}),e[93]=T,e[94]=k):k=e[94];let L;e[95]!==v||e[96]!==C||e[97]!==P||e[98]!==k?(L=s.jsxs("div",{className:"mt-6 space-y-2 border-t pt-4",children:[v,C,P,k]}),e[95]=v,e[96]=C,e[97]=P,e[98]=k,e[99]=L):L=e[99];let D;e[100]!==N||e[101]!==L?(D=s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs(R,{children:[ce,s.jsxs(q,{children:[N,L]})]})}),e[100]=N,e[101]=L,e[102]=D):D=e[102];let ue;e[103]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(U,{children:s.jsxs(V,{className:"flex items-center gap-2",children:[s.jsx(gs,{className:"size-5"}),"Cliente"]})}),e[103]=ue):ue=e[103];let F;e[104]!==t.customer?(F=s.jsxs(R,{children:[ue,s.jsx(q,{className:"space-y-3",children:t.customer?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"font-medium",children:[t.customer.first_name," ",t.customer.last_name]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:t.customer.email}),s.jsx("div",{className:"text-sm text-muted-foreground",children:t.customer.phone}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["RUT: ",t.customer.rut]})]}):s.jsx("div",{className:"text-muted-foreground",children:"Cliente Invitado"})})]}),e[104]=t.customer,e[105]=F):F=e[105];let be;e[106]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(U,{children:s.jsxs(V,{className:"flex items-center gap-2",children:[s.jsx(us,{className:"size-5"}),"Entrega"]})}),e[106]=be):be=e[106];let $;e[107]!==t.shipping_address?($=s.jsxs(R,{children:[be,s.jsx(q,{className:"space-y-3",children:t.shipping_address?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm",children:[t.shipping_address.address_line1,t.shipping_address.address_line2&&s.jsx("br",{}),t.shipping_address.address_line2]}),s.jsxs("div",{className:"text-sm font-medium",children:[t.shipping_address.commune_name,", ",t.shipping_address.region_name]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["CP: ",t.shipping_address.postal_code]})]}):s.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Sin dirección registrada"})})]}),e[107]=t.shipping_address,e[108]=$):$=e[108];let _e;e[109]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(U,{children:s.jsxs(V,{className:"flex items-center gap-2",children:[s.jsx(bs,{className:"size-5"}),"Transportista"]})}),e[109]=_e):_e=e[109];let M;e[110]!==t.carrier||e[111]!==t.metadata?(M=s.jsxs(R,{children:[_e,s.jsx(q,{children:t.carrier?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Ve,{variant:"outline",children:t.carrier.name})}),t.metadata?.tracking_number&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-muted-foreground mr-2",children:"Tracking:"}),s.jsx("span",{className:"font-mono",children:t.metadata.tracking_number})]})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No asignado"})})]}),e[110]=t.carrier,e[111]=t.metadata,e[112]=M):M=e[112];let Ne;e[113]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(U,{children:s.jsxs(V,{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"size-5"}),"Pago"]})}),e[113]=Ne):Ne=e[113];let ye;e[114]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Método"}),e[114]=ye):ye=e[114];const Re=ws[t.metadata?.payment_method?.toLowerCase()]?.label||t.metadata?.payment_method||"No especificado";let E;e[115]!==Re?(E=s.jsxs("div",{className:"space-y-1",children:[ye,s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Ve,{variant:"outline",className:"font-bold border-2",children:Re})})]}),e[115]=Re,e[116]=E):E=e[116];let ve;e[117]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold tracking-wider",children:"Estado del Pago"}),e[117]=ve):ve=e[117];const qe=We[t.payment_status]?.color||"bg-gray-500",Ue=We[t.payment_status]?.label||t.payment_status;let H;e[118]!==qe||e[119]!==Ue?(H=s.jsxs("div",{className:"space-y-1",children:[ve,s.jsx(Ve,{className:qe,children:Ue})]}),e[118]=qe,e[119]=Ue,e[120]=H):H=e[120];let z;e[121]!==E||e[122]!==H?(z=s.jsxs(R,{children:[Ne,s.jsxs(q,{className:"space-y-4",children:[E,H]})]}),e[121]=E,e[122]=H,e[123]=z):z=e[123];let A;e[124]!==F||e[125]!==$||e[126]!==M||e[127]!==z?(A=s.jsxs("div",{className:"space-y-6",children:[F,$,M,z]}),e[124]=F,e[125]=$,e[126]=M,e[127]=z,e[128]=A):A=e[128];let B;e[129]!==D||e[130]!==A?(B=s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[D,A]}),e[129]=D,e[130]=A,e[131]=B):B=e[131];let I;e[132]!==b||e[133]!==B?(I=s.jsxs("div",{className:"space-y-6 p-6",children:[b,B]}),e[132]=b,e[133]=B,e[134]=I):I=e[134];let Se;return e[135]!==Le||e[136]!==a||e[137]!==I?(Se=s.jsxs(Ye,{breadcrumbs:Le,children:[a,I]}),e[135]=Le,e[136]=a,e[137]=I,e[138]=Se):Se=e[138],Se}function Ps(l){return s.jsxs(Ge,{children:[s.jsx(Pe,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[l.image_url&&s.jsx("img",{src:l.image_url,alt:l.product_name,className:"size-12 rounded object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:l.product_name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["SKU: ",l.sku]})]})]})}),s.jsxs(Pe,{className:"text-right",children:["$",parseFloat(l.unit_price.toString()).toLocaleString("es-CL")]}),s.jsx(Pe,{className:"text-center",children:l.quantity}),s.jsxs(Pe,{className:"text-right font-bold",children:["$",parseFloat(l.subtotal.toString()).toLocaleString("es-CL")]})]},l.id)}export{lt as default};
